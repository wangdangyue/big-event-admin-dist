import{r as d,o as v,c,b as t,d as l,f as _,bY as b,E}from"./index-600590e7.js";import{E as V,a as y}from"./el-form-item-0e65acbd.js";import{E as x}from"./_plugin-vue_export-helper-e998ce82.js";import{E as U}from"./el-input-1d2406b5.js";import{P as F}from"./PageContainer-b1730844.js";import"./el-message-378b593e.js";const I={__name:"UserPassword",setup(C){const u=d(),p={old_pwd:"",new_pwd:"",re_pwd:""},e=d({...p}),i=d({old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"原密码长度在6-15个字符之间",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"新密码长度在6-15个字符之间",trigger:"blur"},{validator:(m,r,o)=>{r===e.value.old_pwd?o(new Error("新密码不能与原密码相同")):o()},trigger:"blur"}],re_pwd:[{required:!0,message:"确认新密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"确认新密码长度在6-15个字符之间",trigger:"blur"},{validator:(m,r,o)=>{r!==e.value.new_pwd?o(new Error("确认新密码与新密码不一致")):o()},trigger:"blur"}]}),f=async()=>{await u.value.validate(),await b(e.value),E.success("密码修改成功"),n()},n=()=>{e.value={...p}};return(m,r)=>{const o=U,s=V,w=x,g=y;return v(),c(F,{title:"重置密码"},{default:t(()=>[l(g,{model:e.value,rules:i.value,ref_key:"form",ref:u,"label-width":"100px",style:{"max-width":"460px"}},{default:t(()=>[l(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[l(o,{modelValue:e.value.old_pwd,"onUpdate:modelValue":r[0]||(r[0]=a=>e.value.old_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[l(o,{modelValue:e.value.new_pwd,"onUpdate:modelValue":r[1]||(r[1]=a=>e.value.new_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(s,{label:"确认新密码",prop:"re_pwd"},{default:t(()=>[l(o,{modelValue:e.value.re_pwd,"onUpdate:modelValue":r[2]||(r[2]=a=>e.value.re_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(w,{type:"primary",onClick:f},{default:t(()=>[_("修改密码")]),_:1}),l(w,{onClick:n},{default:t(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{I as default};
